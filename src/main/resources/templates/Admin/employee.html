<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymelef.org" >

<head th:fragment="admin-header">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title> Admin DashBoard</title>
  
  <!-- base:css -->
  <link rel="stylesheet" href="Admin/vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="Admin/vendors/feather/feather.css">
  <link rel="stylesheet" href="Admin/vendors/base/vendor.bundle.base.css">
  <!-- endinject -->
  
  <!-- plugin css for this page -->
  <link rel="stylesheet" href="Admin/vendors/flag-icon-css/css/flag-icon.min.css"/>
  <link rel="stylesheet" href="Admin/vendors/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="Admin/vendors/jquery-bar-rating/fontawesome-stars-o.css">
  <link rel="stylesheet" href="Admin/vendors/jquery-bar-rating/fontawesome-stars.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  
  <link rel="stylesheet" href="Admin/css/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="Admin/images/favicon.png" />
</head>

<body>
	
	   <!-- Topbar start -->
  	<div class="container-scroller">
               
    
		<nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row"  >
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
          <span class="icon-menu"></span>
        </button>
        <ul class="navbar-nav mr-lg-2">
          <li class="nav-item nav-search d-none d-lg-block">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="search">
                  <i class="icon-search"></i>
                </span>
              </div>
              <input type="text" class="form-control" placeholder="Search Projects.." aria-label="search" aria-describedby="search">
            </div>
          </li>
        </ul>
        <ul class="navbar-nav navbar-nav-right">
            
          <li class="nav-item dropdown d-flex">
            <a class="nav-link count-indicator dropdown-toggle d-flex justify-content-center align-items-center" id="messageDropdown" href="#" data-toggle="dropdown">
              <i class="icon-air-play mx-0"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="messageDropdown">
              <p class="mb-0 font-weight-normal float-left dropdown-header">Messages</p>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                    <img src="Admin/images/faces/face4.jpg" alt="image" class="profile-pic">
                </div>
                <div class="preview-item-content flex-grow">
                  <h6 class="preview-subject ellipsis font-weight-normal">David Grey
                  </h6>
                  <p class="font-weight-light small-text text-muted mb-0">
                    The meeting is cancelled
                  </p>
                </div>
              </a>
            
             
            </div>
          </li>
          
          <li class="nav-item dropdown d-flex mr-4 ">
            <a class="nav-link count-indicator dropdown-toggle d-flex align-items-center justify-content-center" id="notificationDropdown" href="#" data-toggle="dropdown">
              <i class="icon-cog"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
              <p class="mb-0 font-weight-normal float-left dropdown-header">Settings</p>
              <a class="dropdown-item preview-item">               
                  <i class="icon-head"></i> Profile
              </a>
              <a class="dropdown-item preview-item">
                  <i class="icon-inbox"></i> Logout
              </a>
            </div>
          </li>
          <li class="nav-item dropdown mr-4 d-lg-flex d-none">
            <a class="nav-link count-indicatord-flex align-item s-center justify-content-center" href="#">
              <i class="icon-grid"></i>
            </a>
          </li>
        </ul>
        <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
          <span class="icon-menu"></span>
        </button>
      </div>
    </nav>
    
    
  <!-- Topbar End -->  
    
    
    <!-- partial -->
    
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_sidebar.html -->
      
      
      <!--########################## ...th:replace fragment... ##########################-->
      
       <div class="sidebar"
               th:replace="Admin/index :: admin-sidebar"></div>
      
      
      <!--@@@@@@@@@@@@@@@@2 Side Bar@@@@@@@@@@@@@ -->
     <!-- <nav class="sidebar sidebar-offcanvas active">
        <div class="user-profile">
          <div class="user-image">
            <img src="Admin/images/faces/face28.png">
          </div>
          <div class="user-name">
            <h3> Admin </h3>
          </div>
        
        </div>
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="/index">
              <i class="icon-box menu-icon"></i>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/employee">
              <i class="icon-command menu-icon"></i>
              <span class="menu-title">Employee</span>    Table change to Employee    
            </a>
          </li>
         
          <li class="nav-item">
            <a class="nav-link" href="#">
              <i class="icon-file menu-icon"></i>
              <span class="menu-title">Visitor</span>
            </a>
          </li>
          
         
          
           <li class="nav-item">
            <a class="nav-link" href="/login">
              <i class="icon-help menu-icon"></i>
              <span class="menu-title">Logout</span>
            </a>
          </li>
           
        </ul>
      </nav>
      -->
      
      <!--@@@@@@@@@@@@@@@@@@@@@@@@@ Side Bar End @@@@@@@@@@@@@@@@@@@@@@@@-->
      
      <!-- partial -->
      <body onload="getTable()"> 
		   
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
			  	<div class="col-sm-6">
							<h1 class="text-success"><b>EMPLOYEE</b></h1>
<!--			  <h1 class="text-white bg-dark text-center">EMPLOYEE DATA</h1>
-->			  <br>
           <li class="nav-item dropdown d-lg-flex d-none">
                <button type="button" class="btn btn-info font-weight-bold" data-toggle="modal" data-target="#addbtn" >ADD EMPLOYEE</button>
            </li>
             <ul class="navbar-nav navbar-nav-right">
          </div>
             
		<div class="table-responsive pt-3">
			<table class="table table-bordered table-dark">
				<thead>
					<tr>
						<th>ID</th>
						<th>EMPLOYEE NAME</th>
						<th>EMPLOYEE MOBILE</th>
						<th>EMPLOYEE EMAIL</th>
						<th>EMPLOYEE DESIGNATION</th>
<!--					<th>Todays Meeting</th>
-->						<th>ACTION</th>
					</tr>
				</thead>
				   
				<tbody id="Table"> 
				
		
			</tbody>
			</table>
		</div>
		
		
        
       <!--^^^^^^^^^^^^^^^  Model Start ADD Employee ^^^^^^^^^^^^^^-->
       
       <div class="modal fade" id="addbtn" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">ADD EMPLOYEE</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<!-- only change div    -->

				<div class="modal-body">

					<form id="addEmp">
						
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Name:</label>
							<input type="text" placeholder="Enter name" class="form-control" id="firstname" name="name" required>
						</div>
							<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Email:</label>
							<input type="email" placeholder="Enter email" class="form-control" id="email" name="email" required>
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Employee Mobile:</label>
							<input type="tel" placeholder="Enter mobile" class="form-control" id="lastname" name="mobile" required></textarea>
						</div>
						
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Designation:</label>
							<select name="Designation" id="emp" class="form-control">
								<option value="Developer" >Developer</option>
								<option value="Tester">Tester</option>
								<option value="Digital Marketing">Digital Marketing</option>
							</select>
						</div>

						
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">CLOSE</button>

							<button type="submit" class="btn btn-primary">ADD EMPLOYEE</button>

						</div>

					</form>					
				</div>

			</div>
		</div>
	</div> 
	
	 <!--^^^^^^^^^^^^^^^ Update the Employee^^^^^^^^^^^^^^-->
	
	<div class="modal fade" id="updatebtn" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">UPDATE EMPLOYEE</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
		<div class="modal-body">

					<form id="updateform">

						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Name:</label>
							<input type="text" class="form-control" id="Name2" name="name">
							<input type="hidden" name="id" id="id1">

						</div>


						<div class="form-group">
							<label for="message-text" class="col-form-label">Employee Email:</label>
							<input type="email" class="form-control" id="Email3" name="email"></textarea>
						</div>

						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Mobile:</label>
							<input type="tel" class="form-control" id="Mobile4" name="mobile">
						</div>
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Employee Designation:</label>
							<select name="Designation" class="form-control" id="designation5">
								<option value="Developer" >Developer</option>
								<option value="Tester">Tester</option>
								<option value="Digital Marketing">Digital Marketing</option>
							</select>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">CLOSE</button>

							<button type="submit"  class="btn btn-primary">UPDATE EMPLOYEE</button>

						</div>

					</form>
				</div>

			</div>
		</div>
	</div>
	
	

        
  <!-- model end -->      
        <!-- Boostrap Lib -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
		integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
	<!-- AjAX lib -->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"> </script>
        
          </div>
         <!-- main center page end -->
         
         <!-- you can put another card here -->

        </div>
        
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  
  
  
  
  <!-- model employee data show-->
<script>
	
	$(document).ready(function () 
		{
			getTable();
		});

		function getTable() {
			$.ajax({
				method: "GET",
				url: '/employeeAll',
				success: function (data)
				 {
					 
					var html = '';
			
   
					for (var i = 0; i < data.length; i++)
							 {
						html += '<tr>'
							+ '<td>' + data[i].id + '</td>' 
							+ '<td>' + data[i].name + '</td>'  
							+ '<td>' + data[i].mobile+ '</td>'
							+ '<td>' + data[i].email+ '</td>'
							+ '<td>' + data[i].designation + '</td>'
							+ '<td>' + '<a class="btn btn-success" data-toggle="modal" data-target="#updatebtn" id="updatebutton" data="' + data[i].id + '"  ><i class="fa fa-pencil-square" aria-hidden="true"></i></a> <a id="delete"  onclick="remove(' + data[i].id + ')" class="delete btn btn-danger" ><i class="fa fa-trash" aria-hidden="true"></i></a>'
							+ '</td>'
						'</tr>';
					}
					
					$('#Table').html(html);
				
				},
				error: function () {
					alert("not working");
				}
			});
		 }

			
		$(document).on('submit', '#addEmp', function (e)
		  {  
			    
			e.preventDefault();
			
			//alert("Employee saved successfully...!");
			
			toastr.success('Employee saved successfully...!');

			
			

			var savedEmp = $("#addEmp").serialize();
			
			console.log(savedEmp)

			$.ajax({
				type: "POST",
				url: '/saveEmployee',
				dataType: 'json',
				data: savedEmp,
				success: function (response) 
				{
					alert('saved')
					getTable();
				},
				error: function ()
				 {
				}
			});
		});
			


		function remove(id) 
		{
			alert('Employee delete successfully..'+id)
			
			$.ajax({
				method: "DELETE",
				contentType: "application/json",
				url: '/deleteEmployee/' + id,
				//data: {id: id},
				success: function (response)
				 {
					getTable();

				},
				error: function () {

					alert("can not delete");
				}
			});
		}

	

    $(document).on('click', '#updatebutton', function () 
     {   
           
			const id = $(this).attr("data");

			 console.log("update showwwsss.."+id);

			  $.ajax({
				type: "GET",
				url: '/updateEmployee',
				contentType: 'application/json',
				data: {id: id},                 
				success: function (data)
				 {	 
					console.log("Display.." + data.email );

					$('#id1').val(data.id);
					$('#Name2').val(data.name);
					$('#Email3').val(data.email);
					$('#Mobile4').val(data.mobile);
					$('#designation5').val("DefaultDesignation");

                  if (data.designation)
                  {
					  
                  $('#designation5').val(data.designation);
                  
				 }		
				 },
				
				error: function () {
					alert("Not Working..")
				}

			});

		});
		

		$('#updateform').on('submit', function (e)     
			{
	            e.preventDefault(); 
	               
	          // alert("Employee Update successfully...!");
	         toastr.success('Update Employee successfully...!');
     
			var Employeedata = $("#updateform").serialize();  
			
			console.log("check update,," + Employeedata);    

			$.ajax({
				type: "POST",
				url: '/saveEmployee',
				data: Employeedata,
				success: function (response)
				 {
					aleret(upadte);
					
					getTable();
				},
				error: function () 
				{
					alert("not work");
				}
			});
		});










  

		
</script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>


  <!-- base:js -->
  <!--<script src="vendors/base/vendor.bundle.base.js"></script> -->
  <!-- endinject -->
  <!-- Plugin js for this page-->
  <!-- End plugin js for this page-->
  <!-- inject:js -->
  <script src="Admin/js/off-canvas.js"></script>
  <script src="Admin/js/hoverable-collapse.js"></script>
  <script src="Admin/js/template.js"></script>
  <!-- endinject -->
  <!-- plugin js for this page -->
  <script src="Admin/vendors/jquery-bar-rating/jquery.barrating.min.js"></script>
  <!-- End plugin js for this page -->
  <!-- Custom js for this page-->
  <script src="Admin/js/dashboard.js"></script>
  <!-- End custom js for this page-->
</body>

</html>

